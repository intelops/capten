grafana:
  enabled: true
  grafana.ini:
    database:
      enabled: true
      type: postgres
      host: postgresql.observability.svc.cluster.local:5432
      name: postgres
      ssl_mode: disable
      user: postgres
      password: $__file{/etc/secrets/postgresql/postgres-password}
      #ssl_mode = require
  extraSecretMounts: 
  - name: my-postgresql-mount 
    mountPath: /etc/secrets/postgresql
    secretName: postgresql
    readOnly: true
  ingress:
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod-cluster
      kubernetes.io/force-ssl-redirect: "true"
      kubernetes.io/ssl-redirect: "true"
      kubernetes.io/tls-acme: "true"
    enabled: true
    hosts:
    - "grafana.{{.DomainName}}"
    tls:
    - hosts:
      - "grafana.{{.DomainName}}"
      secretName: cert-grafana
  plugins:
  - vertamedia-clickhouse-datasource
  - grafana-clickhouse-datasource
  - volkovlabs-echarts-panel
  sidecar:
    dashboards:
      enabled: true
      folderAnnotation: grafana_folder
      provider:
        foldersFromFilesStructure: true
    datasources:
      enabled: true
prometheus:
  ingress:
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod-cluster
      kubernetes.io/force-ssl-redirect: "true"
      kubernetes.io/ssl-redirect: "true"
      kubernetes.io/tls-acme: "true"
    enabled: true
    hosts:
    - "prometheus.{{.DomainName}}"
    paths:
    - /
    tls:
    - hosts:
      - "prometheus.{{.DomainName}}"
      secretName: cert-prometheus
  prometheusSpec:
    enableRemoteWriteReceiver: true
    externalLabels:
      cluster_name: capten-controlplane
alertmanager:
  alertmanagerSpec:
    alertmanagerConfigMatcherStrategy:
      type: None
